import canopy

PatternRainbow = "CTP-eyJrZXkiOiIiLCJ2ZXJzaW9uIjoxLCJuYW1lIjoiTmV3IFBhdHRlcm4iLCJwYWxldHRlcyI6eyJQYWxldHRlMSI6W1swLFsxLDAsMF1dLFswLjE0LFsxLDAuODI3NDUwOTgwMzkyMTU2OCwwLjE0MTE3NjQ3MDU4ODIzNTNdXSxbMC4zMSxbMC4wNTA5ODAzOTIxNTY4NjI3NDQsMSwwXV0sWzAuNTIsWzAsMC45NDExNzY0NzA1ODgyMzUzLDAuODYyNzQ1MDk4MDM5MjE1N11dLFswLjY4LFswLDAuMjgyMzUyOTQxMTc2NDcwNiwxXV0sWzAuOCxbMC40MTE3NjQ3MDU4ODIzNTI5LDAsMC44Nzg0MzEzNzI1NDkwMTk2XV0sWzAuODksWzEsMCwwLjgxNTY4NjI3NDUwOTgwMzldXSxbMSxbMSwwLDBdXV19LCJwYXJhbXMiOnt9LCJsYXllcnMiOlt7ImVmZmVjdCI6InNwYXJrbGVzIiwib3BhY2l0eSI6MSwiYmxlbmQiOiJub3JtYWwiLCJwYWxldHRlIjoiUGFsZXR0ZTEiLCJpbnB1dHMiOnsiZGVuc2l0eSI6MC41LCJvZmZzZXQiOnsidHlwZSI6InNpbiIsImlucHV0cyI6eyJ2YWx1ZSI6MC4zNiwibWluIjowLCJtYXgiOjF9fX19XX0"
PatternRainbow300 = "CTP-eyJrZXkiOiIiLCJ2ZXJzaW9uIjoxLCJuYW1lIjoiTmV3IFBhdHRlcm4iLCJwYWxldHRlcyI6eyJQYWxldHRlMSI6W1swLFsxLDAsMF1dLFswLjE0LFsxLDAuODI3NDUwOTgwMzkyMTU2OCwwLjE0MTE3NjQ3MDU4ODIzNTNdXSxbMC4zMSxbMC4wNTA5ODAzOTIxNTY4NjI3NDQsMSwwXV0sWzAuNTIsWzAsMC45NDExNzY0NzA1ODgyMzUzLDAuODYyNzQ1MDk4MDM5MjE1N11dLFswLjY4LFswLDAuMjgyMzUyOTQxMTc2NDcwNiwxXV0sWzAuOCxbMC40MTE3NjQ3MDU4ODIzNTI5LDAsMC44Nzg0MzEzNzI1NDkwMTk2XV0sWzAuODksWzEsMCwwLjgxNTY4NjI3NDUwOTgwMzldXSxbMSxbMSwwLDBdXV19LCJwYXJhbXMiOnt9LCJsYXllcnMiOlt7ImVmZmVjdCI6InNwYXJrbGVzIiwib3BhY2l0eSI6MSwiYmxlbmQiOiJub3JtYWwiLCJwYWxldHRlIjoiUGFsZXR0ZTEiLCJpbnB1dHMiOnsiZGVuc2l0eSI6MC41LCJvZmZzZXQiOnsidHlwZSI6InNpbiIsImlucHV0cyI6eyJ2YWx1ZSI6MC4zNiwibWluIjowLCJtYXgiOjF9fX19XX0"
PatternGreenScanning = canopy.Pattern("CTP-eyJrZXkiOiJwcmludGVyLXNjYW5uaW5nIiwidmVyc2lvbiI6MCwibmFtZSI6IlByaW50ZXIgU2Nhbm5pbmciLCJwYWxldHRlcyI6eyJDb2xvcnMiOltbMC4wMSxbMC4wMTU2ODYyNzQ1MDk4MDM5MiwxLDBdXSxbMC4xNCxbMC4wMTE3NjQ3MDU4ODIzNTI5NDEsMSwwLjg4NjI3NDUwOTgwMzkyMTVdXSxbMC4yOSxbMC45MDE5NjA3ODQzMTM3MjU1LDEsMF1dLFswLjQ2LFswLjI4MjM1Mjk0MTE3NjQ3MDYsMSwwXV0sWzAuNTksWzAsMC44NjY2NjY2NjY2NjY2NjY3LDFdXSxbMC43NCxbMC44Nzg0MzEzNzI1NDkwMTk2LDAuODY2NjY2NjY2NjY2NjY2NywwLjA2Mjc0NTA5ODAzOTIxNTY5XV0sWzAuODUsWzAsMSwwLjI4MjM1Mjk0MTE3NjQ3MDZdXSxbMC45OCxbMCwwLjg5MDE5NjA3ODQzMTM3MjUsMC4zMjU0OTAxOTYwNzg0MzE0XV1dLCJPdmVybGF5IjpbWzAsWzAsMCwwXV0sWzEsWzAuNTY4NjI3NDUwOTgwMzkyMSwwLjU2ODYyNzQ1MDk4MDM5MjEsMC41Njg2Mjc0NTA5ODAzOTIxXV1dLCJDaGFzZXIgT3ZlcmxheSI6W1swLFsxLDEsMV1dLFsxLFsxLDEsMV1dXX0sInBhcmFtcyI6eyJDb2xvciI6eyJ0eXBlIjoic2luIiwiaW5wdXRzIjp7InZhbHVlIjowLjE4LCJtaW4iOjAsIm1heCI6MX19LCJUaW1lciI6MX0sImxheWVycyI6W3siZWZmZWN0Ijoic29saWQiLCJvcGFjaXR5Ijp7InR5cGUiOiJzaW4iLCJpbnB1dHMiOnsidmFsdWUiOjAuNCwibWluIjowLCJtYXgiOjAuMTl9fSwiYmxlbmQiOiJub3JtYWwiLCJwYWxldHRlIjoiQ29sb3JzIiwiaW5wdXRzIjp7Im9mZnNldCI6IkNvbG9yIn19LHsiZWZmZWN0Ijoic3BhcmtsZXMiLCJvcGFjaXR5IjowLjQ3LCJibGVuZCI6Im92ZXJsYXkiLCJwYWxldHRlIjoiQ29sb3JzIiwiaW5wdXRzIjp7ImRlbnNpdHkiOnsidHlwZSI6InNpbiIsImlucHV0cyI6eyJ2YWx1ZSI6MC4zMywibWluIjowLjE1LCJtYXgiOjF9fSwib2Zmc2V0Ijp7InR5cGUiOiJzaW4iLCJpbnB1dHMiOnsidmFsdWUiOjAuMzIsIm1pbiI6MC4yNCwibWF4IjoxfX19fSx7ImVmZmVjdCI6InNwYXJrbGVzIiwib3BhY2l0eSI6eyJ0eXBlIjoic2luIiwiaW5wdXRzIjp7InZhbHVlIjowLjU1LCJtaW4iOjAuMywibWF4IjoxfX0sImJsZW5kIjoibm9ybWFsLW5vbmJsYWNrIiwicGFsZXR0ZSI6IkNvbG9ycyIsImlucHV0cyI6eyJkZW5zaXR5IjowLjE5LCJvZmZzZXQiOnsidHlwZSI6InNpbiIsImlucHV0cyI6eyJ2YWx1ZSI6MC4yNCwibWluIjowLjM0LCJtYXgiOjF9fX19LHsiZWZmZWN0IjoiY2hhc2VyIiwib3BhY2l0eSI6MSwiYmxlbmQiOiJtdWx0aXBseSIsInBhbGV0dGUiOiJDaGFzZXIgT3ZlcmxheSIsImlucHV0cyI6eyJvZmZzZXQiOiJUaW1lciIsInNpemUiOjF9fV19")
PatternGreenScanningGRB = canopy.Pattern("CTP-eyJrZXkiOiJwcmludGVyLXNjYW5uaW5nLWdyYiIsInZlcnNpb24iOjAsIm5hbWUiOiJQcmludGVyIFNjYW5uaW5nIC0gR1JCIiwicGFsZXR0ZXMiOnsiQ29sb3JzIjpbWzAuMDEsWzEsMC4wMiwwXV0sWzAuMTQsWzEsMC4wMSwwLjg4NjI3NDUwOTgwMzkyMTVdXSxbMC4yOSxbMSwwLjksMF1dLFswLjQ2LFsxLDAuMjgsMF1dLFswLjU5LFswLjg3LDAsMV1dLFswLjc1LFswLjg3ODQzMTM3MjU0OTAxOTYsMC44NjY2NjY2NjY2NjY2NjY3LDAuMDYyNzQ1MDk4MDM5MjE1NjldXSxbMC44NSxbMSwwLDAuMjgyMzUyOTQxMTc2NDcwNl1dLFswLjk4LFswLjg5LDAsMC4zMjU0OTAxOTYwNzg0MzE0XV1dLCJPdmVybGF5IjpbWzAsWzAsMCwwXV0sWzEsWzAuNTY4NjI3NDUwOTgwMzkyMSwwLjU2ODYyNzQ1MDk4MDM5MjEsMC41Njg2Mjc0NTA5ODAzOTIxXV1dLCJDaGFzZXIgT3ZlcmxheSI6W1swLFsxLDEsMV1dLFsxLFsxLDEsMV1dXX0sInBhcmFtcyI6eyJDb2xvciI6eyJ0eXBlIjoic2luIiwiaW5wdXRzIjp7InZhbHVlIjowLjE4LCJtaW4iOjAsIm1heCI6MX19LCJUaW1lciI6MX0sImxheWVycyI6W3siZWZmZWN0Ijoic29saWQiLCJvcGFjaXR5Ijp7InR5cGUiOiJzaW4iLCJpbnB1dHMiOnsidmFsdWUiOjAuNCwibWluIjowLjE5LCJtYXgiOjF9fSwiYmxlbmQiOiJub3JtYWwiLCJwYWxldHRlIjoiQ29sb3JzIiwiaW5wdXRzIjp7Im9mZnNldCI6IkNvbG9yIn19LHsiZWZmZWN0Ijoic3BhcmtsZXMiLCJvcGFjaXR5IjowLjQ3LCJibGVuZCI6Im92ZXJsYXkiLCJwYWxldHRlIjoiT3ZlcmxheSIsImlucHV0cyI6eyJkZW5zaXR5Ijp7InR5cGUiOiJzaW4iLCJpbnB1dHMiOnsidmFsdWUiOjAuMzMsIm1pbiI6MC4xNSwibWF4IjoxfX0sIm9mZnNldCI6eyJ0eXBlIjoic2luIiwiaW5wdXRzIjp7InZhbHVlIjowLjMyLCJtaW4iOjAuMjQsIm1heCI6MX19fX0seyJlZmZlY3QiOiJzcGFya2xlcyIsIm9wYWNpdHkiOnsidHlwZSI6InNpbiIsImlucHV0cyI6eyJ2YWx1ZSI6MC41NSwibWluIjowLCJtYXgiOjF9fSwiYmxlbmQiOiJub3JtYWwtbm9uYmxhY2siLCJwYWxldHRlIjoiT3ZlcmxheSIsImlucHV0cyI6eyJkZW5zaXR5IjowLjE5LCJvZmZzZXQiOnsidHlwZSI6InNpbiIsImlucHV0cyI6eyJ2YWx1ZSI6MC4yNCwibWluIjowLjM0LCJtYXgiOjF9fX19LHsiZWZmZWN0IjoiY2hhc2VyIiwib3BhY2l0eSI6MSwiYmxlbmQiOiJtdWx0aXBseSIsInBhbGV0dGUiOiJDaGFzZXIgT3ZlcmxheSIsImlucHV0cyI6eyJvZmZzZXQiOiJUaW1lciIsInNpemUiOjF9fV19")

pattern_rainbow = canopy.Pattern(PatternRainbow)
pattern_rainbow300 = canopy.Pattern(PatternRainbow300)

scanner_fiber_off_pattern = PatternGreenScanningGRB
scanner_fiber_on_pattern = pattern_rainbow
scanner_fiber_scanning_pattern = pattern_rainbow

scanner_off_pattern = None
scanner_on_pattern = PatternGreenScanningGRB
scanner_scanning_pattern = PatternGreenScanningGRB

back_wall_off_pattern = None
back_wall_on_pattern = pattern_rainbow
back_wall_scanning_pattern = PatternGreenScanningGRB

inner_tube_off_pattern = None
inner_tube_on_pattern = pattern_rainbow
inner_tube_scanning_pattern = pattern_rainbow

outer_tube_off_pattern = None
outer_tube_on_pattern = pattern_rainbow
outer_tube_scanning_pattern = pattern_rainbow

pedastal_off_pattern = pattern_rainbow300
pedastal_on_pattern = pattern_rainbow300
pedastal_scanning_pattern = pattern_rainbow300


class BaseLightFixture(object):
    light_pattern = None

    def __init__(self, port=0, start=0, count=16, brightness=float(0.8)):
        self.segment = canopy.Segment(port, start, count)
        self.params = canopy.Params()
        self.brightness = brightness

    def draw(self):
        if self.light_pattern:
            canopy.draw(
                self.segment,
                self.light_pattern,
                alpha=self.brightness,
                params=self.params,
            )


class ScannerFiberOpticFixture(BaseLightFixture):
    def __init__(self, port=0, start=0, count=16, brightness=float(1.0)):
        super().__init__(port, start, count, brightness)

    def off(self):
        self.light_pattern = scanner_fiber_off_pattern

    def on(self):
        self.light_pattern = scanner_fiber_on_pattern

    def scanning(self):
        self.light_pattern = scanner_fiber_scanning_pattern


class ScannerCanopyFixture(BaseLightFixture):
    def __init__(self, port=0, start=0, count=16, brightness=float(0.8)):
        super().__init__(port, start, count, brightness)
    
    def off(self):
        self.light_pattern = scanner_off_pattern

    def on(self):
        self.light_pattern = scanner_on_pattern

    def scanning(self):
        self.light_pattern = scanner_scanning_pattern


class PrinterBackWallFixture(BaseLightFixture):
    def __init__(self, port=0, start=0, count=16, brightness=float(0.8)):
        super().__init__(port, start, count, brightness)

    def off(self):
        self.light_pattern = back_wall_off_pattern

    def on(self):
        self.light_pattern = back_wall_on_pattern

    def scanning(self):
        self.light_pattern = back_wall_scanning_pattern


class InnerTubeLightFixture(BaseLightFixture):
    def __init__(self, port=0, start=0, count=16, brightness=float(0.8)):
        super().__init__(port, start, count, brightness)

    def off(self):
        self.light_pattern = inner_tube_off_pattern

    def on(self):
        self.light_pattern = inner_tube_on_pattern

    def scanning(self):
        self.light_pattern = inner_tube_scanning_pattern


class OuterTubeLightFixture(BaseLightFixture):
    def __init__(self, port=0, start=0, count=16, brightness=float(0.8)):
        super().__init__(port, start, count, brightness)

    def off(self):
        self.light_pattern = outer_tube_off_pattern

    def on(self):
        self.light_pattern = outer_tube_on_pattern

    def scanning(self):
        self.light_pattern = outer_tube_scanning_pattern


class PedastalLightFixture(BaseLightFixture):
    def __init__(self, port=0, start=0, count=16, brightness=float(0.8)):
        super().__init__(port, start, count, brightness)

    def off(self):
        self.light_pattern = pedastal_off_pattern

    def on(self):
        self.light_pattern = pedastal_on_pattern

    def scanning(self):
        self.light_pattern = pedastal_scanning_pattern
